import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";
import {
  Box,
  Button,
  Card,
  Chip,
  CircularProgress,
  Container,
  Paper,
  Rating,
  Typography,
  Alert,
  ToggleButton,
  ToggleButtonGroup,
} from "@mui/material";
import CodeIcon from "@mui/icons-material/Code";
import RefreshIcon from "@mui/icons-material/Refresh";

import masterLogo from "../assets/img/zuzu-master.png";
import LeetMasterCodeEditor from "../components/LeetMasterCodeEditor";
import { COLORS } from "@/styles/themes";

import { AppDispatch, RootState } from "../store";
import {
  selectFocusArea,
  selectDifficulty,
  generateProblem,
  saveAttempt,
  loadProgress,
  fetchProblemsByFocusArea,
  loadProblemById,
  clearError,
} from "../store/slices/leetMasterSlice";

// Focus area configuration
type FocusArea = {
  id: string;
  name: string;
  description: string;
};

const FOCUS_AREAS: FocusArea[] = [
  {
    id: "arrays",
    name: "Arrays",
    description: "Array manipulation and algorithms",
  },
  {
    id: "strings",
    name: "Strings",
    description: "String processing and pattern matching",
  },
  {
    id: "hash-tables",
    name: "Hash Tables",
    description: "Hash maps and sets",
  },
  {
    id: "linked-lists",
    name: "Linked Lists",
    description: "Linked list operations",
  },
  {
    id: "trees",
    name: "Trees",
    description: "Tree traversal and manipulation",
  },
];

function Logo() {
  return (
    <img
      src={masterLogo}
      alt="Logo"
      style={{
        width: "12.4rem",
        height: "auto",
        border: "#d9cdb4 4px solid",
        borderRadius: "5px",
      }}
    />
  );
}

function getBelt() {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlnsXlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 1024 1024"
      width="100"
      height="100"
      preserveAspectRatio="xMidYMid meet"
      id="Martial Arts Uniform"
    >
      <defs>
        <clipPath id="__lottie_element_2893">
          <rect width="1024" height="1024" x="0" y="0"></rect>
        </clipPath>
        <g id="__lottie_element_2903">
          <g transform="matrix(1,0,0,1,0,0)" opacity="1">
            <g
              opacity="1"
              transform="matrix(1,0,0,1,536.4000244140625,833.4400024414062)"
            >
              <path
                fill="rgb(253,253,253)"
                fillOpacity="1"
                d=" M-87.27106475830078,-98.45100402832031 C-87.27106475830078,-98.45100402832031 -181.1118621826172,-127.57682800292969 -200.98158264160156,-123.31475067138672 C-214.86056518554688,-120.36121368408203 -218.0956268310547,-65.25279998779297 -223.78790283203125,-30.224740982055664 C-229.23098754882812,3.3105175495147705 -241.75477600097656,57.8626708984375 -241.75477600097656,57.8626708984375 C-241.75477600097656,57.8626708984375 -223.34213256835938,67.72425079345703 -176.46212768554688,78.76425170898438 C-129.58212280273438,89.80425262451172 -71.33841705322266,98.77057647705078 -71.33841705322266,98.77057647705078 C-71.33841705322266,98.77057647705078 -47.97842025756836,103.89057159423828 -25.17841911315918,105.01057434082031 C-2.3784196376800537,106.13057708740234 21.30158042907715,101.8105697631836 21.30158042907715,101.8105697631836 C71.33657836914062,94.89457702636719 148.5395050048828,86.74166870117188 148.5395050048828,86.74166870117188 C165.09951782226562,81.62167358398438 225.73057556152344,66.46583557128906 231.4105682373047,60.78483200073242 C237.1705780029297,55.105831146240234 231.9843292236328,20.413270950317383 224.3021240234375,-18.746810913085938 C216.5108184814453,-58.48207092285156 208.47999572753906,-119.75358581542969 198.8000030517578,-127.19258880615234 C189.1199951171875,-134.5535888671875 172.10157775878906,-123.90626525878906 133.9415740966797,-115.90626525878906 C95.70158386230469,-107.90626525878906 70.4305191040039,-105.3094253540039 70.4305191040039,-105.3094253540039 C11.868517875671387,-99.14542388916016 -27.17206382751465,-93.92200469970703 -87.27106475830078,-98.45100402832031z"
              ></path>
              <path
                strokeLinecap="butt"
                strokeLinejoin="miter"
                fillOpacity="0"
                strokeMiterlimit="4"
                stroke="rgb(255,255,255)"
                strokeOpacity="1"
                strokeWidth="2"
                d=" M-87.27106475830078,-98.45100402832031 C-87.27106475830078,-98.45100402832031 -181.1118621826172,-127.57682800292969 -200.98158264160156,-123.31475067138672 C-214.86056518554688,-120.36121368408203 -218.0956268310547,-65.25279998779297 -223.78790283203125,-30.224740982055664 C-229.23098754882812,3.3105175495147705 -241.75477600097656,57.8626708984375 -241.75477600097656,57.8626708984375 C-241.75477600097656,57.8626708984375 -223.34213256835938,67.72425079345703 -176.46212768554688,78.76425170898438 C-129.58212280273438,89.80425262451172 -71.33841705322266,98.77057647705078 -71.33841705322266,98.77057647705078 C-71.33841705322266,98.77057647705078 -47.97842025756836,103.89057159423828 -25.17841911315918,105.01057434082031 C-2.3784196376800537,106.13057708740234 21.30158042907715,101.8105697631836 21.30158042907715,101.8105697631836 C71.33657836914062,94.89457702636719 148.5395050048828,86.74166870117188 148.5395050048828,86.74166870117188 C165.09951782226562,81.62167358398438 225.73057556152344,66.46583557128906 231.4105682373047,60.78483200073242 C237.1705780029297,55.105831146240234 231.9843292236328,20.413270950317383 224.3021240234375,-18.746810913085938 C216.5108184814453,-58.48207092285156 208.47999572753906,-119.75358581542969 198.8000030517578,-127.19258880615234 C189.1199951171875,-134.5535888671875 172.10157775878906,-123.90626525878906 133.9415740966797,-115.90626525878906 C95.70158386230469,-107.90626525878906 70.4305191040039,-105.3094253540039 70.4305191040039,-105.3094253540039 C11.868517875671387,-99.14542388916016 -27.17206382751465,-93.92200469970703 -87.27106475830078,-98.45100402832031z"
              ></path>
            </g>
          </g>
        </g>
        <g id="__lottie_element_2912">
          <g transform="matrix(1,0,0,1,512,512)" opacity="1">
            <g opacity="1" transform="matrix(1,0,0,1,10,156)">
              <path
                fill="rgb(201,201,201)"
                fillOpacity="1"
                d=" M142,-144 C142,-144 142,144 142,144 C142,144 -142,144 -142,144 C-142,144 -142,-144 -142,-144 C-142,-144 142,-144 142,-144z"
              ></path>
              <path
                strokeLinecap="butt"
                strokeLinejoin="miter"
                fillOpacity="0"
                strokeMiterlimit="4"
                stroke="rgb(253,216,52)"
                strokeOpacity="1"
                strokeWidth="1"
                d=" M142,-144 C142,-144 142,144 142,144 C142,144 -142,144 -142,144 C-142,144 -142,-144 -142,-144 C-142,-144 142,-144 142,-144z"
              ></path>
            </g>
          </g>
        </g>
        <mask id="__lottie_element_2903_1" mask-type="alpha"></mask>
        <filter
          id="__lottie_element_2921"
          filterUnits="objectBoundingBox"
          x="0%"
          y="0%"
          width="100%"
          height="100%"
        >
          <feComponentTransfer in="SourceGraphic">
            <feFuncA type="table" tableValues="1.0 0.0"></feFuncA>
          </feComponentTransfer>
        </filter>
        <mask id="__lottie_element_2912_2" mask-type="alpha">
          <g filter="url(#__lottie_element_2921)">
            <rect
              width="1024"
              height="1024"
              x="0"
              y="0"
              fill="#ffffff"
              opacity="0"
            ></rect>
          </g>
        </mask>
      </defs>
      <g clipPath="url(#__lottie_element_2893)">
        <g transform="matrix(1,0,0,1,0,0)" opacity="1">
          <g
            opacity="1"
            transform="matrix(1,0,0,1,523.3200073242188,800.6400146484375)"
          >
            <path
              fill="rgb(200,200,200)"
              fillOpacity="1"
              d=" M223,-189.67999267578125 C223,-189.67999267578125 240.44000244140625,-123.68000030517578 244.44000244140625,-108.55999755859375 C248.44000244140625,-93.44000244140625 293.68426513671875,93.55792999267578 288.8842468261719,107.07792663574219 C284.0842590332031,120.59793090820312 171.67051696777344,175.9274139404297 -4.089482307434082,171.9274139404297 C-179.7694854736328,168.00741577148438 -255.72108459472656,114.2779312133789 -255.72108459472656,114.2779312133789 C-255.72108459472656,114.2779312133789 -251.8379364013672,89.29734802246094 -251.8379364013672,89.29734802246094 C-251.8379364013672,89.29734802246094 -262.1579284667969,86.17634582519531 -274.07794189453125,80.57634735107422 C-285.9979248046875,74.97634887695312 -295.5179443359375,67.05635070800781 -295.5179443359375,67.05635070800781 C-295.5179443359375,67.05635070800781 -288.1664123535156,39.38905715942383 -269.2679138183594,-28.959999084472656 C-250.30337524414062,-97.55018615722656 -232.60000610351562,-172.0800018310547 -232.60000610351562,-172.0800018310547 C-232.60000610351562,-172.0800018310547 223,-189.67999267578125 223,-189.67999267578125z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,536.4000244140625,833.4400024414062)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M-87.27106475830078,-98.45100402832031 C-87.27106475830078,-98.45100402832031 -181.1118621826172,-127.57682800292969 -200.98158264160156,-123.31475067138672 C-214.86056518554688,-120.36121368408203 -218.0956268310547,-65.25279998779297 -223.78790283203125,-30.224740982055664 C-229.23098754882812,3.3105175495147705 -241.75477600097656,57.8626708984375 -241.75477600097656,57.8626708984375 C-241.75477600097656,57.8626708984375 -223.34213256835938,67.72425079345703 -176.46212768554688,78.76425170898438 C-129.58212280273438,89.80425262451172 -71.33841705322266,98.77057647705078 -71.33841705322266,98.77057647705078 C-71.33841705322266,98.77057647705078 -47.97842025756836,103.89057159423828 -25.17841911315918,105.01057434082031 C-2.3784196376800537,106.13057708740234 21.30158042907715,101.8105697631836 21.30158042907715,101.8105697631836 C71.33657836914062,94.89457702636719 148.5395050048828,86.74166870117188 148.5395050048828,86.74166870117188 C165.09951782226562,81.62167358398438 225.73057556152344,66.46583557128906 231.4105682373047,60.78483200073242 C237.1705780029297,55.105831146240234 231.9843292236328,20.413270950317383 224.3021240234375,-18.746810913085938 C216.5108184814453,-58.48207092285156 208.47999572753906,-119.75358581542969 198.8000030517578,-127.19258880615234 C189.1199951171875,-134.5535888671875 172.10157775878906,-123.90626525878906 133.9415740966797,-115.90626525878906 C95.70158386230469,-107.90626525878906 70.4305191040039,-105.3094253540039 70.4305191040039,-105.3094253540039 C11.868517875671387,-99.14542388916016 -27.17206382751465,-93.92200469970703 -87.27106475830078,-98.45100402832031z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,279.8399963378906,784.9199829101562)"
          >
            <path
              fill="rgb(154,154,154)"
              fillOpacity="1"
              d=" M19.68000030517578,-115.55999755859375 C19.68000030517578,-113.72000122070312 -1.6279020309448242,-27.399999618530273 -8.907901763916016,0.2809999883174896 C-16.187902450561523,27.961000442504883 -30.517929077148438,96.29634857177734 -30.517929077148438,96.29634857177734 C-30.517929077148438,96.29634857177734 -22.517929077148438,99.6573486328125 -18.357929229736328,101.01634979248047 C-14.197930335998535,102.37635040283203 -8.197930335998535,105.01634979248047 -8.197930335998535,105.01634979248047 C-8.197930335998535,105.01634979248047 11.535258293151855,2.42199444770813 16.559999465942383,-24.280000686645508 C21.331693649291992,-49.596649169921875 31.061580657958984,-92.53155517578125 34.741580963134766,-103.41155242919922 C38.42158126831055,-114.2905502319336 41.52000045776367,-114.68000030517578 41.52000045776367,-114.68000030517578 C41.52000045776367,-114.68000030517578 19.68000030517578,-115.55999755859375 19.68000030517578,-115.55999755859375z"
            ></path>
          </g>
        </g>
        <g mask="url(#__lottie_element_2903_1)">
          <g
            transform="matrix(0.6299999952316284,0,0,0.8700000047683716,189.44000244140625,126.55999755859375)"
            opacity="1"
          >
            <g
              opacity="1"
              transform="matrix(1,0,0,1,516.6400146484375,818.8800048828125)"
            >
              <path
                fill="rgb(201,201,201)"
                fillOpacity="1"
                d=" M29.280000686645508,-197.22943115234375 C29.280000686645508,-197.22943115234375 19.760000228881836,-210.02943420410156 3.680000066757202,-209.7084197998047 C-9.760000228881836,-209.4684295654297 -20.239999771118164,-196.75042724609375 -20.239999771118164,-196.75042724609375 C-20.239999771118164,-196.75042724609375 -88.25440979003906,-124.58885955810547 -111.43347930908203,-53.582237243652344 C-128.9617919921875,0.1448763608932495 -143.42311096191406,60.374698638916016 -157.41734313964844,96.42366790771484 C-171.33157348632812,132.46621704101562 -186.5699920654297,156.49937438964844 -179.27699279785156,167.89126586914062 C-172.06398010253906,179.28858947753906 -98.49835205078125,187.1507110595703 -86.48706817626953,177.48452758789062 C-74.47578430175781,167.81735229492188 -61.71957778930664,70.65968322753906 -51.59529495239258,20.790180206298828 C-38.84560775756836,-41.87503433227539 -4.969982147216797,-96.69329071044922 4.729982376098633,-94.46360778808594 C8.944628715515137,-93.69961547851562 35.83367919921875,-55.891090393066406 47.597328186035156,-14.264758110046387 C71.69751739501953,71.31475830078125 70.48715209960938,171.5620574951172 76.42941284179688,176.74697875976562 C82.3652572631836,182.00997924804688 108.29312133789062,185.23159790039062 130.64474487304688,183.48216247558594 C151.29710388183594,181.92454528808594 175.84744262695312,176.57373046875 180.3551483154297,168.97645568847656 C184.86375427246094,161.37734985351562 154.06317138671875,54.842437744140625 118.73110961914062,-35.35302734375 C83.47354888916016,-125.46307373046875 29.280000686645508,-197.22943115234375 29.280000686645508,-197.22943115234375z"
              ></path>
            </g>
          </g>
        </g>
        <g transform="matrix(1,0,0,1,0,0)" opacity="1">
          <g opacity="1" transform="matrix(1,0,0,1,511,411.3999938964844)">
            <path
              fill="rgb(200,200,200)"
              fillOpacity="1"
              d=" M1.7200000286102295,-353.5945129394531 C1.7200000286102295,-353.5945129394531 -87.4000015258789,-371.48388671875 -87.4000015258789,-371.48388671875 C-87.4000015258789,-371.48388671875 -108.04000091552734,-373.739013671875 -131.16000366210938,-357.2779846191406 C-160.44000244140625,-336.3820495605469 -157.39999389648438,-326.610107421875 -157.39999389648438,-326.610107421875 C-157.39999389648438,-326.610107421875 -204.17457580566406,-322.601318359375 -274.45123291015625,-278.51251220703125 C-344.7287902832031,-234.4246368408203 -398.5743103027344,-150.65371704101562 -425.66357421875,-108.30106353759766 C-452.75286865234375,-65.94841766357422 -489.8633728027344,7.012344837188721 -495.0910339355469,24.202281951904297 C-500.31866455078125,41.39130401611328 -496.44818115234375,42.30098342895508 -497.5823669433594,72.96731567382812 C-498.71563720703125,103.63272857666016 -492.9994812011719,201.6787872314453 -492.7351989746094,229.3853302001953 C-492.3936767578125,257.1092834472656 -484.942626953125,303.5189514160156 -485.8070983886719,314.69580078125 C-486.67156982421875,325.8726501464844 -454.8504638671875,336.8353271484375 -415.2216491699219,337.029541015625 C-381.8876037597656,337.20574951171875 -347.40142822265625,324.55169677734375 -341.8625793457031,314.42095947265625 C-336.3246154785156,304.2893371582031 -345.0777587890625,223.4790496826172 -350.00555419921875,187.3668670654297 C-354.95166015625,151.3328399658203 -354.50823974609375,113.15111541748047 -354.50823974609375,113.15111541748047 C-354.50823974609375,113.15111541748047 -328.760009765625,54.73848342895508 -310.88189697265625,28.19844627380371 C-293.0037536621094,1.659325122833252 -253.13763427734375,-43.48647689819336 -253.13763427734375,-43.48647689819336 C-253.13763427734375,-43.48647689819336 -242.52000427246094,-7.536287784576416 -242.52000427246094,25.31039810180664 C-242.52000427246094,58.15800094604492 -253.63999938964844,121.80109405517578 -244.9199981689453,144.84109497070312 C-236.1999969482422,167.88108825683594 -220.27999877929688,205.2410888671875 -220.27999877929688,205.2410888671875 C-220.27999877929688,205.2410888671875 54.20872497558594,287.9364929199219 235.32000732421875,187.64109802246094 C235.32000732421875,187.64109802246094 259.9599914550781,167.00108337402344 262.3599853515625,117.6410903930664 C264.760009765625,68.28108978271484 258.3599853515625,-45.41454315185547 264.760009765625,-46.9173583984375 C271.1600036621094,-48.42109298706055 343.76812744140625,73.6970443725586 343.76812744140625,73.6970443725586 C343.76812744140625,73.6970443725586 349.8766784667969,139.50726318359375 343.9915771484375,191.19631958007812 C338.10650634765625,242.88536071777344 335.0063171386719,272.40093994140625 341.08782958984375,280.2169494628906 C347.2484130859375,288.0191955566406 371.37841796875,302.5480651855469 417.4985046386719,303.69036865234375 C463.6176452636719,304.8336181640625 496.2203369140625,297.77935791015625 497.9410705566406,283.8036804199219 C499.66180419921875,269.82708740234375 500.2802734375,152.99855041503906 493.2526550292969,76.8112564086914 C486.2250061035156,0.6239650249481201 463.8959045410156,-46.44209289550781 450.387939453125,-77.63663482666016 C436.8790588378906,-108.83209991455078 409.8423156738281,-155.41986083984375 387.5201416015625,-189.06179809570312 C365.1970520019531,-222.7028045654297 350.6000061035156,-264.5190734863281 330.760009765625,-274.9679260253906 C310.9200134277344,-285.41497802734375 264.760009765625,-307.8146057128906 227.39999389648438,-318.3370666503906 C190.0399932861328,-328.78594970703125 156.60000610351562,-329.9173889160156 156.60000610351562,-329.9173889160156 C156.60000610351562,-329.9173889160156 150.0399932861328,-349.15966796875 116.19999694824219,-363.29107666015625 C94.76000213623047,-372.23529052734375 81.23999786376953,-368.5527648925781 81.23999786376953,-368.5527648925781 C81.23999786376953,-368.5527648925781 1.7200000286102295,-353.5945129394531 1.7200000286102295,-353.5945129394531z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,251.0399932861328,430.32000732421875)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M-25.793256759643555,-260.28778076171875 C-25.793256759643555,-260.28778076171875 -75.86325073242188,-230.8089141845703 -121.04658508300781,-161.17857360839844 C-166.23085021972656,-91.54732513427734 -177.44049072265625,-39.37955093383789 -192.79420471191406,-22.98841667175293 C-208.1488494873047,-6.597280025482178 -215.9340057373047,4.9937520027160645 -217.11233520507812,55.607330322265625 C-218.29159545898438,106.2218246459961 -210.44444274902344,283.59747314453125 -210.44444274902344,283.59747314453125 C-210.44444274902344,283.59747314453125 -170.2037811279297,285.8095397949219 -148.5816192626953,283.8573303222656 C-126.95852661132812,281.9051513671875 -100.74544525146484,278.4438781738281 -100.68321228027344,270.849853515625 C-100.69823455810547,263.23931884765625 -111.00996398925781,89.56616973876953 -111.00996398925781,89.56616973876953 C-111.00996398925781,89.56616973876953 -158.14219665527344,50.148983001708984 -152.0581512451172,45.62030029296875 C-145.95578002929688,41.01344680786133 -97.2442855834961,48.65372085571289 -97.2442855834961,48.65372085571289 C-97.2442855834961,48.65372085571289 -53.87704086303711,-27.002504348754883 -40.758522033691406,-45.72127914428711 C-27.725502014160156,-64.3701400756836 -16.01599884033203,-76.09976196289062 -16.106365203857422,-85.5230712890625 C-16.203147888183594,-94.87096405029297 -32.09342575073242,-154.48233032226562 -25.001422882080078,-160.26600646972656 C-17.91033935546875,-166.04876708984375 20.06842803955078,-107.25878143310547 29.141267776489258,-95.73396301269531 C38.214107513427734,-84.20914459228516 40.35419845581055,-78.5680923461914 40.35419845581055,-78.5680923461914 C40.35419845581055,-78.5680923461914 33.20000076293945,88.00017547607422 42.31999969482422,100.48017120361328 C51.439998626708984,112.96017456054688 64.72000122070312,112.08109283447266 64.72000122070312,112.08109283447266 C64.72000122070312,112.08109283447266 123.5999984741211,12.553406715393066 156,-38.858638763427734 C188.39999389648438,-90.27159881591797 206.63999938964844,-126.12483215332031 206.63999938964844,-126.12483215332031 C206.63999938964844,-126.12483215332031 154.39999389648438,-197.53146362304688 126.87999725341797,-250.67257690429688 C103.91999816894531,-295.095703125 97.76000213623047,-328.76922607421875 97.76000213623047,-328.76922607421875 C97.76000213623047,-328.76922607421875 68.36483001708984,-316.2941589355469 43.84000015258789,-305.392822265625 C19.315166473388672,-294.49151611328125 10.081443786621094,-285.18341064453125 10.081443786621094,-285.18341064453125 C10.081443786621094,-285.18341064453125 40.654083251953125,-194.1129150390625 28.242446899414062,-184.76426696777344 C15.996309280395508,-175.48004150390625 -25.793256759643555,-260.28778076171875 -25.793256759643555,-260.28778076171875z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,428.6400146484375,186.9600067138672)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M42.880001068115234,105.35980987548828 C42.880001068115234,105.35980987548828 65.83999633789062,68.00284576416016 64.16000366210938,62.74116134643555 C62.47999954223633,57.47947692871094 11.920000076293945,2.3839752674102783 -8.15999984741211,-36.77655029296875 C-44,-106.83028411865234 -28.31999969482422,-129.45526123046875 -28.31999969482422,-129.45526123046875 C-28.31999969482422,-129.45526123046875 -38.959999084472656,-126.82395935058594 -50.15999984741211,-114.19628143310547 C-61.36000061035156,-101.568603515625 -65.83999633789062,-89.46699523925781 -65.83999633789062,-89.46699523925781 C-65.83999633789062,-89.46699523925781 -58,-51.05787658691406 -36.15999984741211,-8.8908052444458 C-3.680000066757202,53.64610290527344 42.880001068115234,105.35980987548828 42.880001068115234,105.35980987548828z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,507.0400085449219,334.20001220703125)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M82.16000366210938,-274.59002685546875 C82.16000366210938,-274.59002685546875 85.37999725341797,-275.6421813964844 89.37000274658203,-276.76068115234375 C93.36000061035156,-277.879150390625 98.12000274658203,-279.0621643066406 101.19999694824219,-279.3256530761719 C107.36000061035156,-279.8517150878906 122.95999908447266,-271.8088073730469 132.55999755859375,-264.0675964355469 C142.24000549316406,-256.25 151.0399932861328,-241.96868896484375 151.0399932861328,-241.96868896484375 C151.0399932861328,-241.96868896484375 130.8000030517578,-176.42523193359375 72.08000183105469,-72.92330932617188 C13.279999732971191,30.578601837158203 -42.63999938964844,140.44200134277344 -70,183.80108642578125 C-97.36000061035156,227.1610870361328 -121.36000061035156,257.9620056152344 -121.36000061035156,257.9620056152344 C-121.36000061035156,257.9620056152344 -135.60000610351562,263.6410827636719 -140.8000030517578,248.28109741210938 C-145.9199981689453,232.84201049804688 -151.0399932861328,203.80108642578125 -151.0399932861328,203.80108642578125 C-151.0399932861328,203.80108642578125 -62,56.28462600708008 -62,56.28462600708008 C-62,56.28462600708008 7.039999961853027,-66.98563385009766 7.039999961853027,-66.98563385009766 C7.039999961853027,-66.98563385009766 69.19999694824219,-192.96168518066406 69.19999694824219,-192.96168518066406 C69.19999694824219,-192.96168518066406 82.16000366210938,-274.59002685546875 82.16000366210938,-274.59002685546875z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,689.6400146484375,428.20001220703125)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M-15.5600004196167,-327.0998840332031 C-10.4399995803833,-328.15203857421875 15.640000343322754,-330.4023742675781 51,-317.54937744140625 C86.36000061035156,-304.69635009765625 118.91999816894531,-289.6627197265625 120.04000091552734,-282.14678955078125 C121.16000366210938,-274.6299743652344 87.4800033569336,-182.40283203125 98.36000061035156,-178.11880493164062 C109.23999786376953,-173.83477783203125 149.16000366210938,-252.08041381835938 155.39999389648438,-252.08041381835938 C161.63999938964844,-252.08041381835938 165.75921630859375,-243.6826171875 179.1353759765625,-223.43272399902344 C192.51153564453125,-203.1837615966797 200.43853759765625,-183.9093017578125 211.46961975097656,-171.39700317382812 C222.50160217285156,-158.8856201171875 268.2182922363281,-82.76097106933594 286.003662109375,17.149293899536133 C303.78814697265625,117.05956268310547 299.42706298828125,236.21356201171875 297.7059631347656,243.3857879638672 C295.99859619140625,250.63619995117188 267.4151306152344,259.4505310058594 241.0777587890625,257.4405822753906 C214.75413513183594,255.5097198486328 178.31593322753906,251.70001220703125 179.2089080810547,240.0484619140625 C180.16812133789062,228.3049774169922 186.5262451171875,183.3414306640625 189.00885009765625,156.92611694335938 C191.57054138183594,130.49615478515625 188.9036102294922,100.88858032226562 190.9923858642578,95.92333984375 C193.08114624023438,90.95809173583984 245.0723114013672,59.77432632446289 242.56329345703125,51.5251350402832 C240.05429077148438,43.275943756103516 196.4303741455078,52.24756622314453 186.94715881347656,43.45892333984375 C177.3839569091797,34.6849479675293 105.16000366210938,-81.08065032958984 104.5199966430664,-89.64962768554688 C103.95999908447266,-98.2186050415039 134.1999969482422,-141.1370849609375 125.08000183105469,-147.00027465820312 C115.95999908447266,-152.8634490966797 44.599998474121094,-69.80587005615234 43.47999954223633,-64.46968078613281 C42.36000061035156,-59.1325798034668 56.040000915527344,-22.156564712524414 56.599998474121094,21.287992477416992 C57.15999984741211,64.73346710205078 64.5999984741211,116.68109130859375 32.599998474121094,134.361083984375 C0.6800000071525574,152.0410919189453 -58.119998931884766,155.61058044433594 -98.04000091552734,145.85057067871094 C-137.9600067138672,136.090576171875 -149.39999389648438,119.6105728149414 -149.39999389648438,119.6105728149414 C-149.39999389648438,119.6105728149414 -176.75999450683594,134.4105682373047 -213.8800048828125,145.2905731201172 C-251,156.1705780029297 -279.1600036621094,161.2410888671875 -279.1600036621094,161.2410888671875 C-279.1600036621094,161.2410888671875 -183.9600067138672,7.9098219871521 -110.44000244140625,-130.54400634765625 C-35.400001525878906,-271.6282043457031 -15.5600004196167,-327.0998840332031 -15.5600004196167,-327.0998840332031z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,465.7200012207031,328.6000061035156)"
          >
            <path
              fill="rgb(154,154,154)"
              fillOpacity="1"
              d=" M48.20000076293945,-298.0796813964844 C107.4000015258789,-299.8087463378906 138.83999633789062,-284.7760009765625 138.83999633789062,-284.7760009765625 C138.83999633789062,-284.7760009765625 156.67999267578125,-254.78504943847656 127.16000366210938,-188.03860473632812 C87.08000183105469,-97.69044494628906 53.15999984741211,-34.55204391479492 10.680000305175781,35.50169372558594 C-31.799999237060547,105.55451202392578 -129.47999572753906,285.2410888671875 -129.47999572753906,285.2410888671875 C-129.47999572753906,285.2410888671875 -156.67999267578125,277.0810852050781 -156.67999267578125,277.0810852050781 C-156.67999267578125,277.0810852050781 -154.83999633789062,262.12109375 -152.1199951171875,256.6011047363281 C-149.39999389648438,251.08108520507812 -52.68000030517578,96.38495635986328 -14.119999885559082,29.788429260253906 C27.799999237060547,-42.59494400024414 46.279998779296875,-84.91284942626953 46.279998779296875,-84.91284942626953 C46.279998779296875,-84.91284942626953 3.7200000286102295,-131.2140350341797 -19.639999389648438,-167.7441864013672 C-43,-204.27432250976562 -52.279998779296875,-241.33053588867188 -50.439998626708984,-256.9647521972656 C-48.599998474121094,-272.5989990234375 -35,-287.6317138671875 -35,-287.6317138671875 C-35,-287.6317138671875 -9.720000267028809,-296.3506164550781 48.20000076293945,-298.0796813964844z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,164.52000427246094,740.1599731445312)"
          >
            <path
              fill="rgb(154,154,154)"
              fillOpacity="1"
              d=" M-125.0776596069336,-25.109912872314453 C-124.68438720703125,-15.532856941223145 -109.45768737792969,-6.810360908508301 -68.63050842285156,-9.048023223876953 C-27.804244995117188,-11.285684585571289 -10.936630249023438,-24.526044845581055 -11.608623504638672,-32.85610580444336 C-12.281533241271973,-41.18708801269531 -25.563344955444336,-41.049800872802734 -69.20608520507812,-37.56074905395508 C-112.77066040039062,-34.05427551269531 -125.42852783203125,-34.513214111328125 -125.0776596069336,-25.109912872314453z"
            ></path>
          </g>
          <g opacity="1" transform="matrix(1,0,0,1,883,738)">
            <path
              fill="rgb(154,154,154)"
              fillOpacity="1"
              d=" M-16.449867248535156,-62.15937423706055 C-14.59785270690918,-51.04623794555664 9.479446411132812,-37.80561828613281 44.66999816894531,-36.137123107910156 C79.86054992675781,-34.468624114990234 106.09309387207031,-45.726295471191406 106.08016204833984,-56.982906341552734 C106.06723022460938,-68.24043273925781 79.67707824707031,-65.70527648925781 47.587039947509766,-67.24261474609375 C15.575167655944824,-68.79280090332031 -18.472415924072266,-74.29692077636719 -16.449867248535156,-62.15937423706055z"
            ></path>
          </g>
        </g>
        <g transform="matrix(1,0,0,1,0,0)" opacity="1">
          <g
            opacity="1"
            transform="matrix(1,0,0,1,515.8800048828125,654.9199829101562)"
          >
            <path
              fill="rgb(67,67,67)"
              fillOpacity="1"
              d=" M-246.1999969482422,-64.91890716552734 C-257.0799865722656,-60.758907318115234 -251.8800048828125,-43.07891082763672 -252.67999267578125,-27.718908309936523 C-253.47999572753906,-12.358909606933594 -252.67999267578125,-2.5989091396331787 -247,4.681090831756592 C-241.32000732421875,11.961091041564941 -164.44000244140625,46.41057205200195 1.399999976158142,44.81057357788086 C167.24000549316406,43.210575103759766 246.1199951171875,14.201090812683105 250.52000427246094,8.84109115600586 C256.67999267578125,1.4010908603668213 256.6000061035156,-17.317909240722656 256.760009765625,-33.07891082763672 C257.0799865722656,-54.35791015625 254.1999969482422,-72.99890899658203 243.0800018310547,-69.47891235351562 C235.72000122070312,-67.1589126586914 168.9199981689453,-44.1484260559082 97.63999938964844,-36.86942672729492 C26.440000534057617,-29.589426040649414 -74.19999694824219,-30.43890953063965 -124.04000091552734,-37.31890869140625 C-211.39999389648438,-49.55891036987305 -235.63999938964844,-68.99890899658203 -246.1999969482422,-64.91890716552734z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,516.6400146484375,818.8800048828125)"
          >
            <path
              fill="rgb(67,67,67)"
              fillOpacity="1"
              d=" M29.280000686645508,-197.22943115234375 C29.280000686645508,-197.22943115234375 19.760000228881836,-210.02943420410156 3.680000066757202,-209.7084197998047 C-9.760000228881836,-209.4684295654297 -20.239999771118164,-196.75042724609375 -20.239999771118164,-196.75042724609375 C-20.239999771118164,-196.75042724609375 -88.25440979003906,-124.58885955810547 -111.43347930908203,-53.582237243652344 C-128.9617919921875,0.1448763608932495 -143.42311096191406,60.374698638916016 -157.41734313964844,96.42366790771484 C-171.33157348632812,132.46621704101562 -186.5699920654297,156.49937438964844 -179.27699279785156,167.89126586914062 C-172.06398010253906,179.28858947753906 -99.02633666992188,187.1507110595703 -87.01505279541016,177.48452758789062 C-75.00376892089844,167.81735229492188 -62.64358139038086,70.85087585449219 -52.51929473876953,20.981367111206055 C-39.76960754394531,-41.6838493347168 -26.719999313354492,-78.42942810058594 -13.359999656677246,-97.62942504882812 C-10.479999542236328,-101.7904281616211 -4.639999866485596,-97.14942932128906 4.400000095367432,-94.75042724609375 C7.440000057220459,-93.95042419433594 14.424751281738281,-101.35863494873047 15.6905517578125,-99.01602935791016 C24.346912384033203,-83.11831665039062 36.14120864868164,-56.79371643066406 48.05937194824219,-15.220691680908203 C72.51141357421875,70.37786865234375 72.8631362915039,171.22750854492188 78.80540466308594,176.4124298095703 C84.74124908447266,181.67543029785156 108.29312133789062,185.23159790039062 130.64474487304688,183.48216247558594 C151.29710388183594,181.92454528808594 175.84744262695312,176.57373046875 180.3551483154297,168.97645568847656 C184.86375427246094,161.37734985351562 154.06317138671875,54.842437744140625 118.73110961914062,-35.35302734375 C83.47354888916016,-125.46307373046875 29.280000686645508,-197.22943115234375 29.280000686645508,-197.22943115234375z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,519.7999877929688,691.3599853515625)"
          >
            <path
              fill="rgb(95,100,104)"
              fillOpacity="1"
              d=" M-47.54288864135742,-68.28753662109375 C-47.54288864135742,-68.28753662109375 -23.527629852294922,-68.80437469482422 -23.527629852294922,-68.80437469482422 C-23.527629852294922,-68.80437469482422 -54.279998779296875,-33.470428466796875 -52.36000061035156,-23.310426712036133 C-50.439998626708984,-13.150426864624023 -11.15999984741211,22.609573364257812 1.7999999523162842,21.009572982788086 C14.760000228881836,19.410573959350586 50.439998626708984,-17.95042610168457 49.63999938964844,-25.390426635742188 C48.84000015258789,-32.82942581176758 26.738420486450195,-68.87258911132812 26.738420486450195,-68.87258911132812 C26.738420486450195,-68.87258911132812 49.607627868652344,-69.97100830078125 49.607627868652344,-69.97100830078125 C49.607627868652344,-69.97100830078125 74.68000030517578,-37.15042495727539 73.4800033569336,-21.470426559448242 C72.27999877929688,-5.789426803588867 24.520000457763672,40.60957336425781 1.7999999523162842,41.41057205200195 C-21,42.210575103759766 -72.12000274658203,0.21057334542274475 -73.55999755859375,-23.390426635742188 C-74.68000030517578,-42.91042709350586 -46.422889709472656,-69.48754119873047 -47.54288864135742,-68.28753662109375z"
            ></path>
          </g>
        </g>
        <g transform="matrix(1,0,0,1,0,-5.63104248046875)" opacity="1">
          <g opacity="1" transform="matrix(1,0,0,1,511,411.3999938964844)">
            <path
              fill="rgb(200,200,200)"
              fillOpacity="1"
              d=" M-157.39999389648438,-338.1567687988281 C-157.39999389648438,-338.1567687988281 -208.1942596435547,-342.3417053222656 -278.7325744628906,-296.17724609375 C-349.2714538574219,-250.01280212402344 -399.78814697265625,-164.71617126464844 -429.0650329589844,-121.04144287109375 C-458.34136962890625,-77.36670684814453 -485.1418151855469,-46.93426513671875 -491.2994384765625,-30.078847885131836 C-497.4574890136719,-13.223565101623535 -498.6130676269531,-2.105083703994751 -495.92529296875,28.52008628845215 C-493.238525390625,59.145118713378906 -488.54608154296875,155.44166564941406 -487.69049072265625,183.00616455078125 C-486.7581787109375,210.58645629882812 -478.35247802734375,256.6089172363281 -478.9732666015625,267.7482604980469 C-479.5945129394531,278.8886413574219 -447.6960754394531,289.1174621582031 -408.2586975097656,288.46392822265625 C-375.0848693847656,287.92657470703125 -341.0394592285156,274.5990905761719 -335.7446594238281,264.3999938964844 C-330.450439453125,254.19992065429688 -339.1644287109375,177.0816192626953 -342.6069641113281,141.251220703125 C-346.0698547363281,105.49641418457031 -350.96661376953125,55.72182846069336 -350.96661376953125,55.72182846069336 C-350.96661376953125,55.72182846069336 -322.9669494628906,29.651460647583008 -301.01483154296875,5.247261047363281 C-279.06170654296875,-19.157506942749023 -249.3376007080078,-56.34062957763672 -249.3376007080078,-56.34062957763672 C-249.3376007080078,-56.34062957763672 -157.39999389648438,-338.1567687988281 -157.39999389648438,-338.1567687988281z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,251.0399932861328,430.32000732421875)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M-30.401914596557617,-275.7557678222656 C-30.401914596557617,-275.7557678222656 -77.6174545288086,-247.83470153808594 -123.36139678955078,-174.3098907470703 C-169.1053466796875,-100.78507995605469 -169.23092651367188,-85.12845611572266 -183.22152709960938,-67.83189392089844 C-197.21212768554688,-50.534767150878906 -220.50694274902344,-41.859283447265625 -215.38421630859375,8.60083293914795 C-210.7635498046875,52.55766677856445 -199.87034606933594,124.95965576171875 -203.94659423828125,236.38214111328125 C-203.94659423828125,236.38214111328125 -163.85731506347656,237.72361755371094 -142.38330078125,235.3186492919922 C-120.90928649902344,232.91368103027344 -94.89878845214844,228.90969848632812 -94.99859619140625,221.35203552246094 C-95.17670440673828,213.77928161621094 -110.45536041259766,34.2838020324707 -110.45536041259766,34.2838020324707 C-110.45536041259766,34.2838020324707 -157.62205505371094,-0.9451100826263428 -151.986572265625,-6.029654026031494 C-146.34109497070312,-11.19363021850586 -94.99661254882812,1.2405704259872437 -94.99661254882812,1.2405704259872437 C-75.62049865722656,-22.85124969482422 -55.62914276123047,-32.15288162231445 -43.053955078125,-50.67765426635742 C-29.872753143310547,-70.36055755615234 -12.126754760742188,-85.78728485107422 -12.128202438354492,-95.79523468017578 C-12.135329246520996,-105.72319030761719 -30.912538528442383,-160.9048614501953 -23.78182029724121,-166.9803009033203 C-16.651670455932617,-173.05575561523438 21.921493530273438,-123.48497009277344 31.483110427856445,-111.59474182128906 C41.04472732543945,-99.70451354980469 43.426387786865234,-93.79180908203125 43.426387786865234,-93.79180908203125 C43.426387786865234,-93.79180908203125 206.63999938964844,-136.38131713867188 206.63999938964844,-136.38131713867188 C206.63999938964844,-136.38131713867188 154.39999389648438,-212.38131713867188 126.87999725341797,-268.9413146972656 C103.91999816894531,-316.2213134765625 97.76000213623047,-338.8335266113281 97.76000213623047,-338.8335266113281 C97.76000213623047,-338.8335266113281 70.66529083251953,-334.5179138183594 45.66315460205078,-324.8004150390625 C20.661014556884766,-315.0823669433594 5.629194259643555,-301.8594970703125 5.629194259643555,-301.8594970703125 C5.629194259643555,-301.8594970703125 35.57106399536133,-210.53118896484375 23.098190307617188,-200.7194366455078 C10.790996551513672,-190.97462463378906 -30.401914596557617,-275.7557678222656 -30.401914596557617,-275.7557678222656z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,164.52000427246094,740.1599731445312)"
          >
            <path
              fill="rgb(154,154,154)"
              fillOpacity="1"
              d=" M-118.55006408691406,-72.30622863769531 C-117.95378875732422,-62.78556442260742 -102.61638641357422,-54.43046951293945 -62.0381965637207,-57.529762268066406 C-21.460437774658203,-60.62848663330078 -4.9588236808776855,-74.16477966308594 -5.805781364440918,-82.4391098022461 C-6.653171062469482,-90.71344757080078 -19.866933822631836,-90.29397583007812 -63.22000503540039,-85.88926696777344 C-106.49478149414062,-81.46920013427734 -119.10005187988281,-81.65607452392578 -118.55006408691406,-72.30622863769531z"
            ></path>
          </g>
        </g>
        <g transform="matrix(1,0,0,1,0,0)" opacity="1">
          <g opacity="1" transform="matrix(1,0,0,1,511,411.3999938964844)">
            <path
              fill="rgb(200,200,200)"
              fillOpacity="1"
              d=" M264.760009765625,-46.9173583984375 C271.1600036621094,-48.42109298706055 343.76812744140625,73.6970443725586 343.76812744140625,73.6970443725586 C343.76812744140625,73.6970443725586 349.8766784667969,139.50726318359375 343.9915771484375,191.19631958007812 C338.10650634765625,242.88536071777344 335.0063171386719,272.40093994140625 341.08782958984375,280.2169494628906 C347.2484130859375,288.0191955566406 371.37841796875,302.5480651855469 417.4985046386719,303.69036865234375 C463.6176452636719,304.8336181640625 496.2203369140625,297.77935791015625 497.9410705566406,283.8036804199219 C499.66180419921875,269.82708740234375 500.2802734375,152.99855041503906 493.2526550292969,76.8112564086914 C486.2250061035156,0.6239650249481201 463.8959045410156,-46.44209289550781 450.387939453125,-77.63663482666016 C436.8790588378906,-108.83209991455078 409.8423156738281,-155.41986083984375 387.5201416015625,-189.06179809570312 C365.1970520019531,-222.7028045654297 350.6000061035156,-264.5190734863281 330.760009765625,-274.9679260253906 C310.9200134277344,-285.41497802734375 264.760009765625,-307.8146057128906 227.39999389648438,-318.3370666503906 C190.0399932861328,-328.78594970703125 258.3599853515625,-45.41454315185547 264.760009765625,-46.9173583984375z"
            ></path>
          </g>
          <g
            opacity="1"
            transform="matrix(1,0,0,1,689.6400146484375,428.20001220703125)"
          >
            <path
              fill="rgb(253,253,253)"
              fillOpacity="1"
              d=" M-15.5600004196167,-327.1590576171875 C-10.4399995803833,-328.2106628417969 15.640000343322754,-330.5337829589844 51,-317.6874694824219 C86.36000061035156,-304.8411560058594 118.91999816894531,-289.8153381347656 120.04000091552734,-282.3033752441406 C121.16000366210938,-274.79046630859375 87.4800033569336,-182.61143493652344 98.36000061035156,-178.32965087890625 C109.23999786376953,-174.0478515625 149.16000366210938,-252.25267028808594 155.39999389648438,-252.25267028808594 C161.63999938964844,-252.25267028808594 165.65379333496094,-244.0183868408203 179.06900024414062,-223.79824829101562 C192.48422241210938,-203.57904052734375 200.44761657714844,-184.3247528076172 211.50326538085938,-171.83555603027344 C222.55984497070312,-159.34727478027344 268.147705078125,-83.29491424560547 286.0682373046875,16.601646423339844 C303.98785400390625,116.49820709228516 299.785400390625,235.6699981689453 298.0736999511719,242.8452606201172 C296.3758239746094,250.09866333007812 267.80126953125,258.9520263671875 241.45855712890625,256.97705078125 C215.1297149658203,255.0811309814453 178.68276977539062,251.31967163085938 179.56028747558594,239.66575622558594 C180.50392150878906,227.91981506347656 186.80267333984375,182.94325256347656 189.25025939941406,156.52198791503906 C191.7769317626953,130.0859375 189.07022094726562,100.47895050048828 191.15257263183594,95.51042175292969 C193.23492431640625,90.5418930053711 245.18966674804688,59.28559875488281 242.6693878173828,51.03892517089844 C240.1491241455078,42.79225540161133 196.53280639648438,51.8230094909668 187.0369110107422,43.04613494873047 C177.46102905273438,34.28404998779297 105.16000366210938,-81.34210968017578 104.5199966430664,-89.9066162109375 C103.95999908447266,-98.47113037109375 134.1999969482422,-141.36721801757812 125.08000183105469,-147.2273406982422 C115.95999908447266,-153.08746337890625 44.599998474121094,-70.07321166992188 43.47999954223633,-64.73981475830078 C42.36000061035156,-59.40549087524414 -15.5600004196167,-327.1590576171875 -15.5600004196167,-327.1590576171875z"
            ></path>
          </g>
          <g opacity="1" transform="matrix(1,0,0,1,883,738)">
            <path
              fill="rgb(154,154,154)"
              fillOpacity="1"
              d=" M-16.449867248535156,-62.15937423706055 C-14.59785270690918,-51.04623794555664 9.479446411132812,-37.80561828613281 44.66999816894531,-36.137123107910156 C79.86054992675781,-34.468624114990234 106.09309387207031,-45.726295471191406 106.08016204833984,-56.982906341552734 C106.06723022460938,-68.24043273925781 79.67707824707031,-65.70527648925781 47.587039947509766,-67.24261474609375 C15.575167655944824,-68.79280090332031 -18.472415924072266,-74.29692077636719 -16.449867248535156,-62.15937423706055z"
            ></path>
          </g>
        </g>
        <g mask="url(#__lottie_element_2912_2)">
          <g transform="matrix(1,0,0,1,0,-5.63104248046875)" opacity="1">
            <g
              opacity="1"
              transform="matrix(1,0,0,1,516.6400146484375,818.8800048828125)"
            >
              <path
                fill="rgb(67,67,67)"
                fillOpacity="1"
                d=" M29.280000686645508,-207.91700744628906 C29.280000686645508,-207.91700744628906 20.260000228881836,-206.71800231933594 4.179999828338623,-206.39700317382812 C-9.260000228881836,-206.15699768066406 -20.239999771118164,-207.43800354003906 -20.239999771118164,-207.43800354003906 C-20.239999771118164,-207.43800354003906 -58.31100082397461,-149.50999450683594 -114.31500244140625,-120.16100311279297 C-181.63999938964844,-84.87899780273438 -266.0799865722656,-79.0260009765625 -295.8599853515625,-79.9530029296875 C-325.6400146484375,-80.87999725341797 -361.1809997558594,-85.35800170898438 -368.4620056152344,-78.28800201416016 C-375.7590026855469,-71.2760009765625 -366.9809875488281,-6.454999923706055 -358.072998046875,0.9240000247955322 C-349.1650085449219,8.303999900817871 -179.69500732421875,0.9929999709129333 -119.62200164794922,-32.176998138427734 C-67.63999938964844,-60.880001068115234 -14.190999984741211,-106.34300231933594 -16.389999389648438,-118.08200073242188 C-13.048999786376953,-120.76000213623047 -4.639999866485596,-119.83699798583984 4.400000095367432,-117.43800354003906 C7.440000057220459,-116.63800048828125 17.045000076293945,-120.50399780273438 18.190000534057617,-118.11799621582031 C25.360000610351562,-110.87999725341797 93.60900115966797,-47.46200180053711 163.95899963378906,-17.57200050354004 C269.52099609375,27.27899932861328 363.37200927734375,12.777000427246094 366.989013671875,7.585999965667725 C370.6709899902344,2.3929998874664307 375.4639892578125,-9.62399959564209 372.5989990234375,-27.875 C369.9989929199219,-44.742000579833984 364.0329895019531,-64.56900024414062 357.50299072265625,-67.78700256347656 C350.9729919433594,-71.00499725341797 278.864013671875,-57.32099914550781 197.33900451660156,-84.92500305175781 C120.42500305175781,-110.96800231933594 29.280000686645508,-207.91700744628906 29.280000686645508,-207.91700744628906z"
              ></path>
            </g>
          </g>
        </g>
      </g>
    </svg>
  );
}

const LeetMaster: React.FC = () => {
  const dispatch = useDispatch<AppDispatch>();
  const {
    currentProblem,
    isGenerating,
    isSavingAttempt,
    isLoadingProblems,
    isLoadingProblem,
    error,
    selectedFocusArea,
    selectedDifficulty,
    problemsList,
  } = useSelector((state: RootState) => state.leetMaster);

  const [userRating, setUserRating] = React.useState<number>(0);

  // Load user progress on mount
  useEffect(() => {
    dispatch(loadProgress());
  }, [dispatch]);

  const handleFocusAreaSelect = (focusAreaId: string) => {
    dispatch(selectFocusArea(focusAreaId));
    dispatch(fetchProblemsByFocusArea(focusAreaId));
    setUserRating(0);
  };

  const handleProblemSelect = (problemId: string) => {
    dispatch(loadProblemById(problemId));
    setUserRating(0);
  };

  const handleDifficultyChange = (
    _event: React.MouseEvent<HTMLElement>,
    newDifficulty: "easy" | "medium" | "hard" | null,
  ) => {
    if (newDifficulty) {
      dispatch(selectDifficulty(newDifficulty));
      setUserRating(0);
    }
  };

  const handleGenerateProblem = () => {
    if (selectedFocusArea) {
      dispatch(
        generateProblem({
          focusArea: selectedFocusArea,
          difficulty: selectedDifficulty,
        }),
      );
      setUserRating(0);
    }
  };

  const handleRatingChange = (
    _event: React.SyntheticEvent,
    value: number | null,
  ) => {
    if (value !== null && currentProblem) {
      setUserRating(value);
      dispatch(
        saveAttempt({
          problemId: currentProblem.id,
          rating: value,
        }),
      );
      // Reload progress after rating
      dispatch(loadProgress());
    }
  };

  return (
    <Container maxWidth="xl" sx={{ mt: 0, mb: 4 }}>
      {/* Horizontal Header */}
      <Box sx={{ mb: 2, display: "flex", alignItems: "center", gap: 3 }}>
        {Logo()}
        <Card
          sx={{
            p: 2,
            border: `1px solid ${COLORS.borderWhite}`,
            textAlign: "center",
            minWidth: 200,
            backgroundColor: COLORS.transparentWhite,
            color: COLORS.textPrimary,
          }}
        >
          <Typography
            variant="caption"
            sx={{
              display: "block",
              fontWeight: 600,
              letterSpacing: "0.1em",
              fontSize: "0.75rem",
              mb: 1,
              color: COLORS.textPrimary,
              backdropFilter: "blur(2px)",
            }}
          >
            CURRENT BELT
          </Typography>
          <Box sx={{ display: "flex", justifyContent: "center", my: 1 }}>
            {getBelt()}
          </Box>
          <Typography
            variant="body2"
            sx={{ fontWeight: 500, mt: 1, color: COLORS.textPrimary }}
          >
            6th KYU
          </Typography>
        </Card>
        <Box sx={{ flexGrow: 1 }}>
          <Typography
            variant="h3"
            component="h1"
            sx={{
              mb: 0.5,
              fontWeight: 600,
              letterSpacing: "-0.02em",
              color: COLORS.textPrimary,
            }}
          >
            Leet Master
          </Typography>
          <Typography
            variant="body2"
            sx={{ fontWeight: 400, color: COLORS.textSecondary }}
          >
            <p>
              Your journey begins not when you step onto the mat or write your
              first line of code, but the moment you embrace the fall as your
              greatest teacher.
            </p>
            <p>
              When you stop chasing the solution and start creating the space
              for it to arrivejust as the Tai Chi master yields to an incoming
              strike, you must yield to the complexity of the problem until the
              logic flows, effortless and unbidden, from the stillness of your
              own mind.
            </p>
          </Typography>
        </Box>
      </Box>

      {error && (
        <Alert
          severity="error"
          sx={{
            mb: 3,
            backgroundColor: COLORS.transparentWhite,
            border: `1px solid ${COLORS.borderWhite}`,
          }}
          onClose={() => dispatch(clearError())}
        >
          {error}
        </Alert>
      )}

      {/* Focus Area and Difficulty Selector */}
      <Box
        sx={{
          mb: 3,
          display: "flex",
          gap: 2,
          alignItems: "flex-end",
          flexWrap: "wrap",
        }}
      >
        <Box
          sx={{
            flex: 1,
            p: 1,
            minWidth: "600px",
            maxWidth: "500px",
            backdropFilter: "blur(2px)",
            backgroundColor: COLORS.transparentBlack,
            border: `1px solid ${COLORS.borderWhite}`,
          }}
        >
          <Typography
            variant="overline"
            sx={{
              minWidth: "200px",
              fontWeight: 600,
              letterSpacing: "0.1em",
              fontSize: "0.75rem",
              mb: 1,
              display: "block",
              color: COLORS.textPrimary,
            }}
          >
            Focus Area
          </Typography>
          <Box sx={{ display: "flex", gap: 1, flexWrap: "wrap" }}>
            {FOCUS_AREAS.map((area) => (
              <Button
                key={area.id}
                variant={"outlined"}
                onClick={() => handleFocusAreaSelect(area.id)}
                sx={{
                  textTransform: "none",
                  fontWeight: 600,
                  color:
                    selectedFocusArea === area.id
                      ? "#000"
                      : COLORS.transparentWhiteLight,
                  backgroundColor:
                    selectedFocusArea === area.id
                      ? COLORS.transparentWhiteLight
                      : COLORS.transparent,
                  backdropFilter: "blur(2px)",
                  border: "#000 1px solid",
                }}
              >
                {area.name}
              </Button>
            ))}
          </Box>
        </Box>

        <Box
          sx={{
            p: 1,
            backdropFilter: "blur(2px)",
            backgroundColor: COLORS.transparentBlack,
            border: `1px solid ${COLORS.borderWhite}`,
          }}
        >
          <Typography
            variant="overline"
            sx={{
              fontWeight: 600,
              letterSpacing: "0.1em",
              fontSize: "0.75rem",
              mb: 1,
              display: "block",
              color: COLORS.textPrimary,
            }}
          >
            Difficulty
          </Typography>
          <ToggleButtonGroup
            value={selectedDifficulty}
            exclusive
            onChange={handleDifficultyChange}
            fullWidth
            size="small"
            sx={{
              backgroundColor: "transparent",
              border: `1px solid ${COLORS.borderWhite}`,
            }}
          >
            <ToggleButton
              value="easy"
              sx={{
                fontWeight: 500,
                color:
                  selectedDifficulty === "easy"
                    ? "#fff"
                    : COLORS.transparentWhiteLight,
              }}
            >
              Easy
            </ToggleButton>
            <ToggleButton
              value="medium"
              sx={{
                fontWeight: 500,
                color:
                  selectedDifficulty === "medium"
                    ? "#fff"
                    : COLORS.transparentWhiteLight,
              }}
            >
              Medium
            </ToggleButton>
            <ToggleButton
              value="hard"
              sx={{
                fontWeight: 500,
                color:
                  selectedDifficulty === "hard"
                    ? "#fff"
                    : COLORS.transparentWhiteLight,
              }}
            >
              Hard
            </ToggleButton>
          </ToggleButtonGroup>
        </Box>
        <Button
          variant="contained"
          color="secondary"
          onClick={handleGenerateProblem}
          disabled={isGenerating}
          startIcon={
            isGenerating ? <CircularProgress size={20} /> : <RefreshIcon />
          }
          sx={{
            border: `1px solid ${COLORS.transparentBlackDark}`,
            backgroundColor: COLORS.transparentBlack,
            color: "#fff",
            "&:hover": { backgroundColor: COLORS.transparentBlackDark },
          }}
        >
          {isGenerating ? "Generating..." : "Generate Problem"}
        </Button>
      </Box>

      {/* Previous Problems Section */}
      {selectedFocusArea && (
        <Box
          sx={{
            mb: 3,
            p: 1.5,
            backdropFilter: "blur(2px)",
            backgroundColor: COLORS.transparentBlack,
            border: `1px solid ${COLORS.borderWhite}`,
          }}
        >
          <Typography
            variant="overline"
            sx={{
              fontWeight: 600,
              letterSpacing: "0.1em",
              fontSize: "0.75rem",
              mb: 1,
              display: "block",
              color: COLORS.textPrimary,
            }}
          >
            Previous Problems
          </Typography>
          {isLoadingProblems ? (
            <Box sx={{ display: "flex", alignItems: "center", gap: 1 }}>
              <CircularProgress
                size={16}
                sx={{ color: COLORS.textSecondary }}
              />
              <Typography variant="body2" sx={{ color: COLORS.textSecondary }}>
                Loading...
              </Typography>
            </Box>
          ) : problemsList.length === 0 ? (
            <Typography variant="body2" sx={{ color: COLORS.textSecondary }}>
              No problems attempted yet in this category
            </Typography>
          ) : (
            <Box sx={{ display: "flex", gap: 1, flexWrap: "wrap" }}>
              {problemsList.map((problem) => (
                <Chip
                  key={problem.problem_id}
                  label={problem.title}
                  onClick={() => handleProblemSelect(problem.problem_id)}
                  disabled={isLoadingProblem}
                  size="small"
                  sx={{
                    backgroundColor: COLORS.transparentWhite,
                    color: COLORS.textPrimary,
                    fontWeight: 500,
                    border: `1px solid ${COLORS.borderWhite}`,
                    cursor: "pointer",
                    "&:hover": {
                      backgroundColor: COLORS.transparentWhiteLight,
                    },
                    "& .MuiChip-label": {
                      maxWidth: "200px",
                      overflow: "hidden",
                      textOverflow: "ellipsis",
                    },
                  }}
                />
              ))}
            </Box>
          )}
        </Box>
      )}

      {/* Problem Display */}
      <Box>
        {!currentProblem && !isGenerating && (
          <Paper
            sx={{
              p: 6,
              textAlign: "center",
              backgroundColor: COLORS.transparentBlack,
              border: `1px solid ${COLORS.borderWhite}`,
            }}
          >
            <CodeIcon
              sx={{ fontSize: 60, color: COLORS.textSecondary, mb: 2 }}
            />
            <Typography
              variant="h5"
              sx={{ color: COLORS.textSecondary }}
              gutterBottom
            >
              Select a focus area and generate a problem to get started
            </Typography>
            <Typography variant="body2" sx={{ color: COLORS.textSecondary }}>
              Choose from Arrays, Strings, Hash Tables, Linked Lists, or Trees
            </Typography>
          </Paper>
        )}

        {isGenerating && (
          <Paper
            sx={{
              p: 6,
              textAlign: "center",
              backgroundColor: COLORS.transparentWhite,
              border: `1px solid ${COLORS.borderWhite}`,
            }}
          >
            <CircularProgress
              size={60}
              sx={{ mb: 2, color: COLORS.textPrimary }}
            />
            <Typography variant="h6" sx={{ color: COLORS.textPrimary }}>
              Generating your problem...
            </Typography>
            <Typography variant="body2" sx={{ color: COLORS.textSecondary }}>
              This may take a few moments
            </Typography>
          </Paper>
        )}

        {currentProblem && !isGenerating && (
          <Box>
            {/* Code Editor */}
            <LeetMasterCodeEditor
              problemJson={currentProblem.problem_json}
              difficulty={currentProblem.difficulty}
            />

            {/* Actions */}
            <Box
              sx={{
                mt: 3,
                display: "flex",
                alignItems: "center",
                justifyContent: "space-between",
              }}
            >
              <Box>
                <Typography
                  variant="body2"
                  gutterBottom
                  sx={{ color: COLORS.textPrimary }}
                >
                  Rate this problem:
                </Typography>
                <Rating
                  value={userRating}
                  onChange={handleRatingChange}
                  disabled={isSavingAttempt}
                  size="large"
                  sx={{ color: COLORS.accentBlue }}
                />
                {isSavingAttempt && (
                  <Typography
                    variant="caption"
                    sx={{ ml: 1, color: COLORS.textSecondary }}
                  >
                    Saving...
                  </Typography>
                )}
              </Box>
              <Button
                variant="outlined"
                onClick={handleGenerateProblem}
                disabled={isGenerating}
                startIcon={<RefreshIcon />}
              >
                New Problem
              </Button>
            </Box>
          </Box>
        )}
      </Box>
    </Container>
  );
};

export default LeetMaster;
